<console-module
	name="chat-user">

	<console-helper-provider
		object-name="chatUser"
		view-priv="chat:supervisor">

		<context-stuff
			name="chatUserName"
			field="code"/>

		<context-stuff
			name="chatId"
			field="chat.id"/>

		<priv-key
			name="chatUser.view"
			priv="chat:supervisor"/>

		<priv-key
			name="chatUser.manage"
			priv="chat:manage"/>

		<run-post-processor
			name="chat"/>

	</console-helper-provider>

	<object-context
		name="chatUser"
		object-name="chatUser">

		<list>

			<section
				name="search"
				label="Search">

				<object-search-page
					name="new"
					tab-label="New"
					search-fields="search"
					results-fields="results"
					priv-key="chat.supervisor"/>

				<context-tab-action-page
					name="old"/>

				<context-tab-responder
					name="oldResults"
					tab="chatUser.search.old"/>

			</section>

			<context-tab-responder-page
				name="online"/>

			<object-create-page
				fields="create"
				create-time="created"
				target-responder="chatUserCreateResponder"/>

		</list>

		<object>

			<context-tab-responder-page
				name="summary"/>

			<context-tab-action-page
				name="notes"/>

			<extension-point
				name="chatUser.admin"/>

			<extension-point
				name="chatUser.images"/>

			<context-tab-responder-page
				name="history"/>

			<context-tab-responder-page
				name="help"/>

			<context-action-page
				name="helpForm"/>

			<object-events-page
				priv-key="chat.userAdmin"/>

		</object>

	</object-context>

	<field-set
		name="search"
		class="wbs.apn.chat.user.core.model.ChatUserSearch">

		<enum-field
			name="type"
			nullable="yes"/>

		<text-field
			name="code"
			nullable="yes"/>

		<text-field
			name="numberLike"
			label="Number"
			nullable="yes"/>

		<!-- TODO include deleted -->

		<enum-field
			name="gender"
			nullable="yes"/>

		<enum-field
			name="orient"
			nullable="yes"/>

		<object-field
			name="categoryId"
			object-type="chatCategory"
			root-field="chat"
			nullable="yes"/>

		<text-field
			name="name"
			nullable="yes"/>

		<text-field
			name="info"
			nullable="yes"/>

		<text-field
			name="location"
			nullable="yes"/>

		<yes-no-field
			name="hasPicture"
			nullable="yes"/>

		<yes-no-field
			name="hasVideo"
			nullable="yes"/>

		<yes-no-field
			name="adultVerified"
			nullable="yes"/>

		<enum-field
			name="creditMode"
			nullable="yes"/>

		<currency-field
			name="creditFailed"
			currency="chat.currency"
			nullable="yes"/>

		<currency-field
			name="creditNoReports"
			currency="chat.currency"
			nullable="yes"/>

		<currency-field
			name="valueSinceEver"
			label="Total spent"
			currency="chat.currency"
			nullable="yes"/>

		<interval-field
			name="firstJoin"
			nullable="yes"/>

		<enum-field
			name="datingMode"
			nullable="yes"/>

		<yes-no-field
			name="online"
			nullable="yes"/>

	</field-set>

	<field-set
		name="results"
		object-name="chatUser">

		<code-field/>

		<enum-field
			name="type"/>

		<enum-field
			name="gender"/>

		<enum-field
			name="orient"/>

		<text-field
			name="name"/>

		<!-- TODO picture -->

		<text-field
			name="infoText"
			label="Info"/>

	</field-set>

	<field-set
		name="create"
		object-name="chatUser">

		<gsm-field
			name="name"
			minimum-length="1"
			maximum-length="16"/>

		<enum-field
			name="gender"/>

		<enum-field
			name="orient"/>

		<gazetteer-field
			name="postcode"
			field="locationPlace"
			gazetteer="chat.gazetteer"/>

		<gsm-field
			name="infoText"
			label="Info"
			minimum-length="1"
			maximum-length="160"/>

		<date-field
			name="dob"
			label="Date of birth"/>

		<object-field
			name="category"
			object-type="chatCategory"
			root-field="chat"
			nullable="yes"/>

	</field-set>

</console-module>
