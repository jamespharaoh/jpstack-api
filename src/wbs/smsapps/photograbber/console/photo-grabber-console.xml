<console-module
	name="photo-grabber">

	<console-helper-provider
		object-name="photoGrabber">

		<priv-key
			name="photoGrabber.manage"
			priv="manage"/>

		<priv-key
			name="photoGrabber.messages"
			priv="messages"/>

		<priv-key
			name="photoGrabber.stats"
			priv="stats"/>

		<context-stuff
			name="photoGrabberName"
			field="name"/>

	</console-helper-provider>

	<object-context
		name="photoGrabber"
		object-name="photoGrabber">

		<list>

			<object-list-page
				fields="list"/>

			<object-create-page/>

		</list>

		<object>

			<object-summary-page
				fields="summary"/>

			<object-settings-page
				fields="settings"/>

			<object-sms-messages-page/>

			<object-sms-stats-page/>

			<object-events-page/>

		</object>

	</object-context>

	<field-set
		name="list"
		object-name="photoGrabber">

		<parent-field/>
		<name-field/>
		<description-field/>

	</field-set>

	<field-set
		name="summary"
		object-name="photoGrabber">

		<id-field/>
		<parent-field/>
		<code-field/>
		<name-field/>
		<description-field/>
		<deleted-field/>

		<text-field
			name="url"
			label="URL"/>

		<object-field
			name="billRoute"
			finder="route"/>

		<text-field
			name="billNumber"/>

		<text-field
			name="billTemplate"/>

		<object-field
			name="mmsRoute"
			label="MMS route"
			finder="route"/>

		<text-field
			name="mmsNumber"
			label="MMS number"/>

		<text-field
			name="mmsTemplate"
			label="MMS template"/>

		<text-field
			name="mmsSubject"
			label="MMS subject"/>

		<yes-no-field
			name="jpeg"
			label="JPEG"/>

		<integer-field
			name="jpegWidth"
			label="JPEG width"/>

		<integer-field
			name="jpegHeight"
			label="JPEG height"/>

			<integer-field
			name="jpegQuality"
			label="JPEG quality"/>

	</field-set>

	<field-set
		name="settings"
		object-name="photoGrabber">

		<id-field/>
		<code-field/>
		<name-field/>
		<description-field/>
		<deleted-field/>

		<text-field
			name="url"
			label="URL"/>

		<object-field
			name="billRoute"
			finder="route"/>

		<text-field
			name="billNumber"/>

		<text-field
			name="billTemplate"/>

		<object-field
			name="mmsRoute"
			label="MMS route"
			finder="route"/>

		<text-field
			name="mmsNumber"
			label="MMS number"/>

		<text-field
			name="mmsTemplate"
			label="MMS template"/>

		<text-field
			name="mmsSubject"
			label="MMS subject"/>

		<yes-no-field
			name="jpeg"
			label="JPEG"/>

		<integer-field
			name="jpegWidth"
			label="JPEG width"/>

		<integer-field
			name="jpegHeight"
			label="JPEG height"/>

		<integer-field
			name="jpegQuality"
			label="JPEG quality"/>

	</field-set>

</console-module>

<!--
	public class RequestReissueAction extends ConsoleAction {

		public RequestReissueAction() {
			super(requestReissueResponder);
		}

		@Override
		public Responder go(ConsoleRequestContext requestContext) {

			// check privs
			if (!requestContext.canContext("photoGrabber.reissue")) {
				requestContext.addError("Access denied");
				return null;
			}

			@Cleanup Transaction transaction = database.beginReadWrite ();

			UserRec myUser = userDao.findUserById(requestContext.getUserId());
			PhotoGrabberRequestRec req = photoGrabberDao
					.findPhotoGrabberRequestById(requestContext
							.getStuffInt("photoGrabberRequestId"));
			PhotoGrabberRec pg = req.getPhotoGrabber();

			// send message

			MessageRec m =
				messageSender.get ()
					.threadId (req.getThreadId ())
					.number (req.getNumber ())
					.messageString (pg.getMmsTemplate ())
					.numFrom (pg.getMmsNumber ())
					.route (pg.getMmsRoute ())
					.service (serviceLogic.findService (pg, "default"))
					.subjectString (pg.getMmsSubject ())
					.medias (ImmutableList.<MediaRec>of (req.getMedia ()))
					.send ();

			// save record
			PhotoGrabberReissueRec ri = new PhotoGrabberReissueRec();
			ri.setPhotoGrabberRequest(req);
			ri.setTimestamp(new Date());
			ri.setUser(myUser);
			ri.setMessage(m);
			photoGrabberDao.insertPhotoGrabberReissue(ri);

			transaction.commit();

			requestContext.addNotice("Photo reissued");
			return null;
		}
	}
-->
